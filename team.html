<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CYPX ONLINE CRYPTO - Team</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* --- original CSS preserved --- */
    body{margin:0;font-family:Arial,sans-serif;background-color:#001f3f;color:white;}
    header{background-color:#002f6c;padding:15px;text-align:center;font-size:20px;font-weight:bold;}
    header img{height:20px;vertical-align:middle;margin-right:8px;}
    .referral{background-color:#003366;padding:15px;text-align:center;}
    .referral input{width:100%;padding:10px;border:none;border-radius:6px;margin-top:10px;background-color:#f4f4f4;color:#333;cursor:pointer;}
    .stats{display:flex;flex-wrap:wrap;padding:15px;gap:10px;justify-content:space-between;}
    .stat-box{flex:1;min-width:30%;background-color:#004080;border-radius:10px;padding:10px;text-align:center;color:#ffcc00;}
    .selection-period{text-align:center;margin:10px 0;font-size:14px;}
    .team-section-title{background-color:#002b5c;padding:10px;font-weight:bold;text-align:center;margin-top:10px;border-top:1px solid #003;border-bottom:1px solid #003;}
    .level-box{background-color:#003366;margin:10px 15px;padding:15px;border-radius:10px;}
    .level-total{font-weight:bold;color:#ffcc00;margin-bottom:10px;}
    .level-referrals div{background-color:#004080;margin:5px 0;padding:8px;border-radius:6px;font-size:14px;}
    .team-levels{padding-bottom:80px;}
    nav{position:fixed;bottom:0;left:0;right:0;background-color:#002244;display:flex;justify-content:space-around;padding:10px 0;}
    nav a{color:white;text-align:center;text-decoration:none;font-size:14px;}
    nav i{font-size:20px;}
    .popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:green;color:white;padding:20px;border-radius:10px;font-weight:bold;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.4);}
    .explanation{margin:20px 15px 50px 15px;background-color:#002b5c;padding:15px;border-radius:10px;line-height:1.5;font-size:14px;}
  </style>
</head>
<body>
  <header>
    <img src="https://png.pngtree.com/png-clipart/20221216/original/pngtree-vip-icon-design-png-image_8749175.png" alt="logo">
    CYPX ONLINE CRYPTO - Team
  </header>

  <div class="referral">
    <div>Your Referral Link:</div>
    <input type="text" id="ref-link" readonly />
  </div>

  <div class="selection-period">Selection period</div>

  <div class="stats">
    <div class="stat-box"><div>Team Size</div><div>0</div></div>
    <div class="stat-box"><div>Team Recharge</div><div>KSH 0.00</div></div>
    <div class="stat-box"><div>Team Withdrawal</div><div>KSH 0.00</div></div>
    <div class="stat-box"><div>New Team</div><div>0</div></div>
    <div class="stat-box"><div>First Time Recharge</div><div>0</div></div>
    <div class="stat-box"><div>First Withdrawal</div><div>0</div></div>
  </div>

  <div class="team-levels">
    <div class="team-section-title">LEV 1 - 17% Commission</div>
    <div class="level-box" id="lev1">
      <div class="level-total">Total: KSH 0.00</div>
      <div class="level-referrals"></div>
    </div>

    <div class="team-section-title">LEV 2 - 2% Commission</div>
    <div class="level-box" id="lev2">
      <div class="level-total">Total: KSH 0.00</div>
      <div class="level-referrals"></div>
    </div>

    <div class="team-section-title">LEV 3 - 1% Commission</div>
    <div class="level-box" id="lev3">
      <div class="level-total">Total: KSH 0.00</div>
      <div class="level-referrals"></div>
    </div>
  </div>

  <div class="explanation">
    <strong>Invite friends to get three levels of rewards:</strong><br><br>
    Company benefits - invite subordinates to contribute and get 20% commission (17%, 2%, 1%).<br>
    You can invite friends, members, relatives to join and earn three high commission rewards as follows:<br><br>
    A: Team first-level top-up 50,000 KSH → 17% rebate (15,500 KSH)<br>
    B: Team second-level top-up 50,000 KSH → 2% rebate (3,500 KSH)<br>
    C: Team third-level top-up 50,000 KSH → 1% rebate (1,400 KSH)<br><br>
    Conclusion: If you are A-level, you get (A+B+C) = 17+2+1 = 20% total commission.<br><br>
    The fastest way to make money here is not saving money yourself, but forming a team to earn generous commissions and leading team members to make money together.
  </div>

  <nav>
    <a href="dashboard.html"><i class="fas fa-home"></i><br>Home</a>
    <a href="task.html"><i class="fas fa-tasks"></i><br>Task</a>
    <a href="team.html"><i class="fas fa-users"></i><br>Team</a>
    <a href="vip.html"><i class="fas fa-crown"></i><br>VIP</a>
    <a href="profile.html"><i class="fas fa-user"></i><br>Me</a>
  </nav>

  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCCW4G9JlVu_xb0bGjlKmsi5mdqXSwvFak",
  authDomain: "quantum-rio.firebaseapp.com",
  databaseURL: "https://quantum-rio-default-rtdb.firebaseio.com",
  projectId: "quantum-rio",
  storageBucket: "quantum-rio.appspot.com",
  messagingSenderId: "805433999377",
  appId: "1:805433999377:web:d0efa8c46ec4a0fa30f1b0",
  measurementId: "G-4RSQXZJX44"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);

const refInput = document.getElementById("ref-link");

onAuthStateChanged(auth, async (user) => {
  if (!user) {
    // not signed in – redirect to login or show message
    refInput.value = "Please sign in to get your referral link.";
    return;
  }

  try {
    // fetch username saved under /users/{uid}/username
    const snap = await get(child(ref(db), "users/" + user.uid + "/username"));
    if (snap.exists()) {
      const username = snap.val().trim();
      const link = `https://quantamwallet.github.io/CYPX-ONLINE-CRYPTO-/signup.html?ref=${encodeURIComponent(username)}`;
      refInput.value = link;
      refInput.addEventListener("click", () => {
        refInput.select();
        document.execCommand("copy");
      });
    } else {
      refInput.value = "Username not set.";
    }
  } catch (err) {
    console.error("Error reading username:", err);
    refInput.value = "Unable to load referral link.";
  }
});
                                </script>
</body>
    </html>
